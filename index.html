
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</title>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjs@12.4.1/lib/browser/math.min.js"></script>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      background: #fff;
      color: #000;
      text-align: center;
      padding: 20px;
    }
    video, canvas {
      width: 320px;
      border: 2px solid #000;
      border-radius: 12px;
      margin: 10px 0;
    }
    button {
      background: #000;
      color: #fff;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    p {
      font-size: 18px;
      margin-top: 15px;
    }
    .facebook-btn {
      display: inline-flex;
      align-items: center;
      background-color: #1877f2;
      color: white;
      text-decoration: none;
      padding: 10px 18px;
      border-radius: 8px;
      margin-top: 30px;
      font-size: 16px;
      transition: background 0.3s;
    }
    .facebook-btn:hover {
      background-color: #155bb5;
    }
    .facebook-btn svg {
      margin-left: 8px;
      width: 20px;
      height: 20px;
      fill: white;
    }
  </style>
</head>
<body>

<h1>ğŸ“· Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</h1>
<video id="video" autoplay playsinline></video><br>
<button onclick="captureImage()">ğŸ“¸ Ø§Ù„ØªÙ‚Ø· Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©</button>
<canvas id="canvas" style="display:none;"></canvas>
<p id="equationText">Ø§Ù†ØªØ¸Ø± Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©...</p>
<p id="solution">ğŸ” Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</p>

<!-- Ø²Ø± ÙÙŠØ³Ø¨ÙˆÙƒ -->
<a class="facebook-btn" href="https://www.facebook.com/anasssaadate" target="_blank">
  ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
    <path d="M19 6h5V0h-5c-5 0-9 4-9 9v3H6v6h4v14h6V18h5l1-6h-6v-3c0-1 1-3 3-3z"/>
  </svg>
</a>

<script>
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const equationText = document.getElementById('equationText');
  const solution = document.getElementById('solution');

  // ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => { video.srcObject = stream; })
    .catch(err => console.error("ÙØ´Ù„ ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§", err));

  function captureImage() {
    const ctx = canvas.getContext('2d');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    equationText.textContent = "Ø¬Ø§Ø±ÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©...";

    // OCR Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ
    Tesseract.recognize(canvas, 'eng', { logger: m => console.log(m) })
      .then(({ data: { text } }) => {
        let rawText = text.replace(/\s+/g, '').replace(/[^\d\w\+\-\*\/\^\=\(\)\.]/g, '');
        equationText.textContent = "Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: " + rawText;

        try {
          let result;
          if (rawText.includes('=')) {
            const sides = rawText.split('=');
            result = math.solve(sides[0] + ' - (' + sides[1] + ')', 'x');
            solution.textContent = "Ø§Ù„Ø­Ù„: x = " + result;
          } else {
            result = math.evaluate(rawText);
            solution.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: " + result;
          }
        } catch (e) {
          solution.textContent = "âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.";
        }
      });
  }
</script>

</body>
</html>
